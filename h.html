<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Document</title>
    <style>
        input {
            height: 7mm
        }
    input[type="button"] {
      height: 8mm; /* 设置高度为7毫米 */
      width: auto; /* 可选：根据需要调整宽度 */
    }
    </style>
</head>

<body>
    <label for="yqg">h</label><input id="yqg" type="number" value="1210.713" placeholder="仪器高"><br><br>
    <label for="distance">distance</label><input id="distance" type="number" value="7.2" placeholder="距中桩宽度"><br><br>
    <label for="layer">
	<select id="jgc" >
	<option value="0.05">CRR top</option>
	<option value="0.2">C2 top</option>
	<option value="0.35">C1 top</option>
	<option value="0.5">G15 top</option>
	<option value="0.65">G7 top</option>
	<option value="0.8">G3 top</option>
	</select>
	</label><input id="layer" type="number" value="0.05" placeholder="距路面顶"><br><br>
    <label for="Interval">Interval</label><input id="Interval" type="number" value="25" placeholder="至下一个桩号的距离"><br><br>


    <label for="k">K</label><input id="k" type="number" value="108600" placeholder="里程">

    <input type="button" value="calculate" id="calculate"><br><br>

    <input type="button" value="←" id="before">&nbsp;&nbsp;&nbsp;
    <input type="button" value="→" id="next" style="margin-left: 12mm;"><br><br>



    <div id="design"></div>
    <script>
let sqxb =[[57415.25,1269.365,0],
[57519.9,1269.2,30842.864],
[58059.5,1265.55,18254.54],
[58650,1256.38,17744.827],
[58730,1255.859,0],
[59250,1252.772,15460.349],
[59950,1239.561,26433.797],
[60550,1231.869,13751.196],
[61098.06,1218.466,20372.176],
[61405,1213.973,12541.471],
[61827.79,1213.178,72048.196],
[62500,1213.78,31966.874],
[62942.79,1218.332,40452.418],
[64327.02,1239.406,18588.994],
[64951.16,1243.536,11639.738],
[65273.79,1241.236,40775.091],
[65799.9,1235.55,15058.596],
[66049.9,1241.149,0],
[66550,1256.58,25597.119],
[67848.25,1281.423,30874.672],
[68477.1,1284.291,24409.853],
[68904.29,1279.239,11666.28],
[69350.62,1281.613,7210.201],
[69866.42,1270.049,97825.78],
[70374.77,1259.691,129320.86],
[71055.44,1244.506,140642.089],
[71528.96,1234.784,32958.078],
[72083.96,1227.599,48056.403],
[72486.73,1224.061,25583.684],
[72772.48,1223.338,70381.743],
[73182.18,1221.37,82577545.88],
[73921.18,1217.822,66629.957],
[74950.12,1219.059,32566.609],
[75807.67,1226.673,65293.128],
[76495.92,1230.254,76742.367],
[76901.96,1230.991,33341.725],
[77421.93,1228.036,65351.977],
[78032.46,1227.369,35518.541],
[78615.59,1222.135,38732.561],
[79009.6,1220.633,103825.673],
[79469.05,1218.085,44740.176],
[79795.48,1217.588,26459.5],
[80190.91,1213.997,54924.528],
[80659.21,1208.039,17492.164],
[80972.65,1207.635,58760.258],
[81341.49,1208.415,89279.49],
[81939.49,1208.34,22133.679],
[82308.33,1213.293,46337.707],
[82690.66,1217.107,63930.219],
[83104.84,1219.943,42478.049],
[83409.08,1220.737,59502.426],
[83911.31,1223.567,231843.654],
[85053.9,1230.991,17814.297],
[85395.43,1236.661,14051.599],
[86231.7,1235.666,258721.913],
[86884.22,1234.133,74726.908],
[87214.12,1232.475,49913.05],
[87631.17,1231.883,58102.432],
[88195.11,1228.656,154108.508],
[88684.21,1226.492,169286.421],
[89135.7,1223.961,30216.245],
[89612.87,1225.234,15564.222],
[90219.38,1217.11,57945.399],
[90655.56,1212.773,30268.242],
[91150.23,1211.123,220907.024],
[91670.46,1208.799,217993.642],
[92512.48,1205.81,146561.835],
[93052.48,1204.63,29690.139],
[93332.48,1202.132,29528.831],
[93952.48,1200.8,82482.854],
[94784.73,1201.03,257695.611],
[95558.06,1202.144,168423.125],
[96074.04,1203.5,1013582.354],
[96699.1,1205.266,898534.63],
[97106.23,1206.303,10320.446],
[97717.1,1219.697,24694.503],
[98299.38,1237.18,20545.51],
[98701.24,1244.356,13084.806],
[99599.79,1239.8,33510.307],
[100099.79,1240.995,37812.454],
[100492.61,1244.531,26413.996],
[100900.11,1252.056,11009.158],
[101439.7,1249.767,71699.476],
[101922.93,1249.402,40413.534],
[102303.69,1246.759,60608.789],
[102729.61,1245.208,9074.058],
[103102.85,1235.11,8867.718],
[103596.06,1231.528,20392.564],
[104236.85,1236.301,262966.147],
[104724.39,1240.396,19166.94],
[105411.42,1236.847,10137.988],
[105900.04,1217.454,16612.817],
[106183.49,1208.934,5214.809],
[106457.94,1207,25430.6],
[106999.69,1207.443,238105.213],
[107775.31,1207.1,172321.526],
[108434.95,1207.727,30259.914],
[109000.04,1213.493,126422.21],
[109751.06,1219.374,31542.587],
[110830.65,1217.56,57958.554],
[111499.73,1219.899,37894.647],
[112144.63,1217.048,30476.723],
[112799.55,1219.525,15102.504],
[113220.55,1214.427,29474.853],
[113801.53,1202.464,16494.016],
[114348.65,1202.808,148241.82],
[114756.21,1202.102,41755.232],
[115173.6,1203.878,22081.107],
[115748.04,1212.826,1707919.929],
[116436.75,1223.433,130139.506],
[117295.7,1239.302,8988.26],
[118006.97,1224.746,12917.193],
[118410.3,1224.298,48363.103],
[118731.11,1225.6,0]];

let slope = [[57415.25, -0.025, -0.025],
[58257.57, -0.025, -0.025],
[58257.57, -0.025, -0.025],
[58279.53, -0.025, 0],
[58301.49, -0.025, 0.025],
[58378.16, -0.025, 0.025],
[58400.12, -0.025, 0],
[58422.08, -0.025, -0.025],
[58422.08, -0.025, -0.025],
[58480.7, -0.025, -0.025],
[58480.7, -0.025, -0.025],
[58502.66, 0, -0.025],
[58529.89, 0.031, -0.031],
[58622.82, 0.031, -0.031],
[58650.05, 0, -0.025],
[58672.01, -0.025, -0.025],
[58672.01, -0.025, -0.025],
[59248.01, -0.025, -0.025],
[59248.01, -0.025, -0.025],
[59269.97, -0.025, 0],
[59297.2, -0.031, 0.031],
[59440.49, -0.031, 0.031],
[59473.78, 0.031, -0.031],
[59632.57, 0.031, -0.031],
[59659.8, 0, -0.025],
[59681.76, -0.025, -0.025],
[59681.76, -0.025, -0.025],
[59762.2, -0.025, -0.025],
[59784.16, -0.025, 0],
[59806.11, -0.025, 0.025],
[59826.32, -0.048, 0.048],
[59921.79, -0.048, 0.048],
[60001.65, -0.025, 0.025],
[60075.87, -0.025, 0.025],
[60097.83, -0.025, 0],
[60119.79, -0.025, -0.025],
[60119.79, -0.025, -0.025],
[61238.63, -0.025, -0.025],
[61238.63, -0.025, -0.025],
[61260.59, 0, -0.025],
[61282.55, 0.025, -0.025],
[61334.18, 0.025, -0.025],
[61356.14, 0, -0.025],
[61378.1, -0.025, -0.025],
[61378.1, -0.025, -0.025],
[63243.57, -0.025, -0.025],
[63243.57, -0.025, -0.025],
[63265.53, 0, -0.025],
[63292.76, 0.031, -0.031],
[63427.21, 0.031, -0.031],
[63454.44, 0, -0.025],
[63476.4, -0.025, -0.025],
[63476.4, -0.025, -0.025],
[63559.3, -0.025, -0.025],
[63559.3, -0.025, -0.025],
[63581.26, -0.025, 0],
[63603.22, -0.025, 0.025],
[63750.83, -0.025, 0.025],
[63772.79, -0.025, 0],
[63794.75, -0.025, -0.025],
[63794.75, -0.025, -0.025],
[64109.47, -0.025, -0.025],
[64109.47, -0.025, -0.025],
[64131.42, 0, -0.025],
[64173.58, 0.048, -0.048],
[64192.03, 0.048, -0.048],
[64234.19, 0, -0.025],
[64256.15, -0.025, -0.025],
[64256.15, -0.025, -0.025],
[64398.88, -0.025, -0.025],
[64398.88, -0.025, -0.025],
[64420.84, 0, -0.025],
[64442.8, 0.025, -0.025],
[64601.59, 0.025, -0.025],
[64623.55, 0, -0.025],
[64645.51, -0.025, -0.025],
[64645.51, -0.025, -0.025],
[64748.43, -0.025, -0.025],
[64748.43, -0.025, -0.025],
[64770.39, 0, -0.025],
[64812.55, 0.048, -0.048],
[64971.51, 0.048, -0.048],
[65013.67, 0, -0.025],
[65035.63, -0.025, -0.025],
[65035.63, -0.025, -0.025],
[65309.25, -0.025, -0.025],
[65309.25, -0.025, -0.025],
[65331.21, -0.025, 0],
[65358.44, -0.031, 0.031],
[65460.65, -0.031, 0.031],
[65487.88, -0.025, 0],
[65509.84, -0.025, -0.025],
[65509.84, -0.025, -0.025],
[66392.92, -0.025, -0.025],
[66392.92, -0.025, -0.025],
[66414.88, 0, -0.025],
[66436.84, 0.025, -0.025],
[66580.46, 0.025, -0.025],
[66602.42, 0, -0.025],
[66624.38, -0.025, -0.025],
[66624.38, -0.025, -0.025],
[66907.06, -0.025, -0.025],
[66907.06, -0.025, -0.025],
[66929.01, -0.025, 0],
[66980.83, -0.059, 0.059],
[67007.62, -0.059, 0.059],
[67059.44, -0.025, 0],
[67081.4, -0.025, -0.025],
[67081.4, -0.025, -0.025],
[67154.07, -0.025, -0.025],
[67154.07, -0.025, -0.025],
[67176.02, -0.025, 0],
[67227.84, -0.059, 0.059],
[67326.61, -0.059, 0.059],
[67378.43, -0.025, 0],
[67400.39, -0.025, -0.025],
[67400.39, -0.025, -0.025],
[67672.16, -0.025, -0.025],
[67672.16, -0.025, -0.025],
[67694.12, -0.025, 0],
[67721.35, -0.031, 0.031],
[67940.32, -0.031, 0.031],
[67967.55, -0.025, 0],
[67989.51, -0.025, -0.025],
[67989.51, -0.025, -0.025],
[68080.72, -0.025, -0.025],
[68080.72, -0.025, -0.025],
[68102.68, 0, -0.025],
[68140.45, 0.043, -0.043],
[68379.8, 0.043, -0.043],
[68417.57, 0, -0.025],
[68439.53, -0.025, -0.025],
[68439.53, -0.025, -0.025],
[68940.67, -0.025, -0.025],
[68940.67, -0.025, -0.025],
[68962.63, 0, -0.025],
[68984.59, 0.025, -0.025],
[69237.97, 0.025, -0.025],
[69259.93, 0, -0.025],
[69281.89, -0.025, -0.025],
[69281.89, -0.025, -0.025],
[69427.93, -0.025, -0.025],
[69427.93, -0.025, -0.025],
[69449.89, -0.025, 0],
[69492.05, -0.048, 0.048],
[69503.03, -0.048, 0.048],
[69545.19, -0.025, 0],
[69567.15, -0.025, -0.025],
[69567.15, -0.025, -0.025],
[70388.84, -0.025, -0.025],
[70388.84, -0.025, -0.025],
[70410.8, 0, -0.025],
[70452.96, 0.048, -0.048],
[70503.07, 0.048, -0.048],
[70545.23, 0, -0.025],
[70567.19, -0.025, -0.025],
[70567.19, -0.025, -0.025],
[70661.88, -0.025, -0.025],
[70661.88, -0.025, -0.025],
[70683.84, -0.025, 0],
[70715.46, -0.036, 0.036],
[70770.02, -0.036, 0.036],
[70801.64, -0.025, 0],
[70823.6, -0.025, -0.025],
[70823.6, -0.025, -0.025],
[80727.68, -0.025, -0.025],
[80727.68, -0.025, -0.025],
[80749.64, 0, -0.025],
[80771.6, 0.025, -0.025],
[81008.4, 0.025, -0.025],
[81030.36, 0, -0.025],
[81052.32, -0.025, -0.025],
[81052.32, -0.025, -0.025],
[83776.19, -0.025, -0.025],
[83776.19, -0.025, -0.025],
[83798.15, -0.025, 0],
[83849.97, -0.059, 0.059],
[83919.35, -0.059, 0.059],
[83971.17, -0.025, 0],
[83993.12, -0.025, -0.025],
[83993.12, -0.025, -0.025],
[89382.94, -0.025, -0.025],
[89382.94, -0.025, -0.025],
[89404.9, 0, -0.025],
[89451.45, 0.053, -0.053],
[89538.01, 0.053, -0.053],
[89584.56, 0, -0.025],
[89606.52, -0.025, -0.025],
[89606.52, -0.025, -0.025],
[89693.61, -0.025, -0.025],
[89693.61, -0.025, -0.025],
[89715.57, -0.025, 0],
[89762.12, -0.053, 0.053],
[89830.39, -0.053, 0.053],
[89876.94, -0.025, 0],
[89898.89, -0.025, -0.025],
[89898.89, -0.025, -0.025],
[89922.17, -0.025, -0.025],
[89922.17, -0.025, -0.025],
[89944.13, 0, -0.025],
[89995.95, 0.059, -0.059],
[90043.54, 0.059, -0.059],
[90095.36, 0, -0.025],
[90117.32, -0.025, -0.025],
[90117.32, -0.025, -0.025],
[97450.93, -0.025, -0.025],
[97450.93, -0.025, -0.025],
[97472.89, -0.025, 0],
[97524.71, -0.059, 0.059],
[97692.61, -0.059, 0.059],
[97744.43, -0.025, 0],
[97766.39, -0.025, -0.025],
[97766.39, -0.025, -0.025],
[99405.87, -0.025, -0.025],
[99405.87, -0.025, -0.025],
[99427.83, 0, -0.025],
[99462.97, 0.04, -0.04],
[99619.42, 0.04, -0.04],
[99654.56, 0, -0.025],
[99676.52, -0.025, -0.025],
[99676.52, -0.025, -0.025],
[100752.3, -0.025, -0.025],
[100752.3, -0.025, -0.025],
[100774.25, 0, -0.025],
[100805.87, 0.036, -0.036],
[100905.78, 0.036, -0.036],
[100937.4, 0, -0.025],
[100959.36, -0.025, -0.025],
[100959.36, -0.025, -0.025],
[105108.72, -0.025, -0.025],
[105108.72, -0.025, -0.025],
[105130.68, -0.025, 0],
[105172.84, -0.048, 0.048],
[105319.29, -0.048, 0.048],
[105361.45, -0.025, 0],
[105383.41, -0.025, -0.025],
[105383.41, -0.025, -0.025],
[105385.14, -0.025, -0.025],
[105385.14, -0.025, -0.025],
[105407.09, 0, -0.025],
[105449.25, 0.048, -0.048],
[105578.09, 0.048, -0.048],
[105620.25, 0, -0.025],
[105642.21, -0.025, -0.025],
[105642.21, -0.025, -0.025],
[105656.27, -0.025, -0.025],
[105656.27, -0.025, -0.025],
[105678.23, -0.025, 0],
[105720.39, -0.048, 0.048],
[105776.37, -0.048, 0.048],
[105818.53, -0.025, 0],
[105840.48, -0.025, -0.025],
[105840.48, -0.025, -0.025],
[105828.19, -0.025, -0.025],
[105893.88, -0.025, -0.025],
[105927.19, -0.025, -0.025],
[105949.15, 0, -0.025],
[105971.11, 0.025, -0.025],
[105979.01, 0.034, -0.034],
[106093.89, 0.034, -0.034],
[106101.79, 0.025, -0.025],
[106123.75, 0, -0.025],
[106145.7, -0.025, -0.025],
[109836.11, -0.025, -0.025],
[109858.07, -0.025, 0],
[109880.02, -0.025, 0.025],
[109900.23, -0.048, 0.048],
[109935.39, -0.048, 0.048],
[109955.59, -0.025, 0.025],
[109977.55, -0.025, 0],
[109999.5, -0.025, -0.025],
[117273.1, -0.025, -0.025],
[117273.1, -0.025, -0.025],
[117295.06, -0.025, 0],
[117317.02, -0.025, 0.025],
[117724.52, -0.025, 0.025],
[117746.48, -0.025, 0],
[117768.44, -0.025, -0.025],
[117768.44, -0.025, -0.025],
[117886.95, -0.025, -0.025],
[117886.95, -0.025, -0.025],
[117908.91, -0.025, 0],
[117930.87, -0.025, 0.025],
[118281.76, -0.025, 0.025],
[118303.72, -0.025, 0],
[118325.68, -0.025, -0.025],
[118325.68, -0.025, -0.025],
[118427.02, -0.025, -0.025],
[118427.02, -0.025, -0.025],
[118448.98, 0, -0.025],
[118500.8, 0.059, -0.059],
[118573.35, 0.059, -0.059],
[118646.6, 0.059, -0.059],
[118650.97, 0.059, -0.059],
[118702.79, 0, -0.025],
[118724.75, -0.025, -0.025],
[118724.75, -0.025, -0.025],
[118731.11, -0.025, -0.025]];

function Gaocheng(bpdlc, bpdgc, r, qp, hp, t, k) {
    let f = qp - hp;
    r = r * Math.abs(f) / f;
    let x;
    if (k <= bpdlc - t) {
        x = 0;
    }
    else if (k >= bpdlc + t) {
        x = 0;
        qp = hp;
    }
    else {
        x = k - bpdlc + t;
    }

    return (bpdgc - (bpdlc - k) * qp - Math.pow(x, 2) / 2 / r);
}




//高程
function h(k) {
    let hp = 0;
    for (let i = 1; i < sqxb.length - 1; i++) {
        let r = sqxb[i][2];
        if (r < 0.001)
            r = 0.001;
        let qp = (sqxb[i][1] - sqxb[i - 1][1]) / (sqxb[i][0] - sqxb[i - 1][0]);
        hp = (sqxb[i + 1][1] - sqxb[i][1]) / (sqxb[i + 1][0] - sqxb[i][0]);
        let f = qp - hp;
        let t = r * Math.abs(f) / 2;
        if (k <= sqxb[i][0] + t)
            return Gaocheng(sqxb[i][0], sqxb[i][1], r, qp, hp, t, k);
    }
    //the last
    if (k <= sqxb[sqxb.length - 1][0]) {
        return sqxb[sqxb.length - 1][1] + (k - sqxb[sqxb.length - 1][0]) * hp;
    }
    return -1;
}


//横坡
function hp(k) {
	
    for (var i = 0; i < slope.length - 1; i++) {
        if (k >= slope[i][0] && k <= slope[i + 1][0]) {
            let L = slope[i][1] + (slope[i + 1][1] - slope[i][1]) / (slope[i + 1][0] - slope[i][0]) * (k - slope[i][0]);
            let R = slope[i][2] + (slope[i + 1][2] - slope[i][2]) / (slope[i + 1][0] - slope[i][0]) * (k - slope[i][0]);
            return [L, R];

        }

    }
    return [0.0, 0.0];
}



        document.getElementById("calculate").onclick = function () {
            js();
        };

        document.getElementById("next").onclick = function () {
            document.getElementById("k").value = document.getElementById("k").value * 1 + document.getElementById("Interval").value * 1;
            js();
        }
        document.getElementById("before").onclick = function () {
            document.getElementById("k").value = document.getElementById("k").value * 1 - document.getElementById("Interval").value * 1;
            js();
        }

        function js() {
            document.getElementById("design").innerHTML = "";
            let yqg = document.getElementById("yqg").value * 1;
            let k = document.getElementById("k").value * 1;
            let b = document.getElementById("distance").value * 1;
            let houdu = document.getElementById("layer").value * 1;
            let hpLR = hp(k);
            let hpL = hpLR[0];
            let hpR = hpLR[1];
            let centerh = h(k);


            let Ldesign = centerh - houdu + b * hpL + 0.2;
            let Rdesign = centerh - houdu + b * hpR + 0.2;

            let Ldesign1 = centerh - houdu - (b * hpR) + 0.2;
            let Rdesign1 = centerh - houdu - (b * hpL) + 0.2


            document.getElementById("design").innerHTML = `
            Ldesign:${(Ldesign-0.2).toFixed(3)}<br>
			centerh:${(centerh-houdu).toFixed(3)} <br>
			Rdesign:${(Rdesign-0.2).toFixed(3)}<br>
            slop:${(100 * hpL).toFixed(1)}% &nbsp; ${(100 * hpR).toFixed(1)}%

            <br><br>
            left0(mm):${(yqg - Ldesign).toFixed(3) * 1000}<br>
            leftTop(mm):${(yqg - Ldesign1).toFixed(3) * 1000}
            <br><br>
            right0(mm):${(yqg - Rdesign).toFixed(3) * 1000}<br>
            rightTop(mm):${(yqg - Rdesign1).toFixed(3) * 1000}
            `;

            navigator.vibrate(100);

        }
		
		
		 document.getElementById("jgc").addEventListener("change",function(){
		 document.getElementById("layer").value =this.value;
		 });
    </script>

</body>

</html>